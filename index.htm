<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <title>API</title>
    <script src="app.js"></script>
    <script src="usuarios.js"></script>
    <script src="datos.js"></script>
    <script src="posts.js"></script>
</head>
<body>
    <header>
        <nav class="menu">
            <ul>
                <li class="oculta"><a id="Mostrar-usuarios" href="#">Mostrar usuarios</a></li>
                <li class=""><a id="Agregar-usuario" href="#">Agregar usuario</a></li>
                <li class=""><a id="Buscar-usuario" href="#">Buscar usuario</a></li>
                <li class=""><a id="Mostrar-posts" href="#">Mostrar posts</a></li>
                <li class=""><a id="Obtener-posts" href="#">Obtener Posts</a></li>
            </ul>
        </nav>
    </header>

    <!-- Tabla de los usuarios -->
    <section class="" id="table_u"> 
        <div>
            <table id="tabla_usuarios" class="tabla">
                <tr>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Street</th>
                    <th>Suit</th> 
                    <th>City</th>
                    <th>Zipcode</th>  
                    <th>Lat</th> 
                    <th>Lng</th> 
                    <th>Phone</th> 
                    <th>Website</th> 
                    <th>Company Name</th> 
                    <th>Catch Phrase</th> 
                    <th>Bs</th> 
                </tr>
            </table>
        </div>
    </section>

    <!-- Select de Usuario -->
    <section id="form_p" class="oculta">
        <form class="formulario">
            <div class="grupo">
                <label>Username</label>
                <select id="select-usuarios" value="1">
                </select>
            </div>
            <div id="resultado-user-post"></div>
        </form>
    </section>

    <!-- Forumlario de los usuarios -->
    <section id="form_u" class="oculta">
        <div class="form-container">
            <form class="formulario">
                <div class="grupo">
                    <label>Nombre</label>
                    <input id="name" type="text" placeholder="Name" required>
                </div>
                <div class="grupo">
                    <label>Username</label>
                    <input id="username" type="text" placeholder="Username" required>
                </div>
                <div class="grupo">
                    <label>Correo Electrónico</label>
                    <input id="email" type="email" placeholder="Email" required>
                </div>
                <div class="grupo">
                    <label>Calle</label>
                    <input id="street" type="text" placeholder="Street" required>
                </div>
                <div class="grupo">
                    <label>Departamento</label>
                    <input id="suit" type="text" placeholder="Suit" required>
                </div>
                <div class="grupo">
                    <label>Ciudad</label>
                    <input id="city" type="text" placeholder="City" required>
                </div>
                <div class="grupo">
                    <label>Código Postal</label>
                    <input id="zipcode" type="text" placeholder="Zipcode" required>
                </div>
                <div class="grupo">
                    <label>Latitud</label>
                    <input id="lat" type="text" placeholder="Latitude" required>
                </div>
                <div class="grupo">
                    <label>Altitud</label>
                    <input id="lng" type="text" placeholder="Longitude" required>
                </div>
                <div class="grupo">
                    <label>Teléfono</label>
                    <input id="phone" type="text" placeholder="Phone" required>
                </div>
                <div class="grupo">
                    <label>Sitio Web</label>
                    <input id="website" type="text" placeholder="Website" required>
                </div>
                <div class="grupo">
                    <label>Nombre de la compañía</label>
                    <input id="company" type="text" placeholder="Company Name" required>
                </div>
                <div class="grupo">
                    <label>Frase</label>
                    <input id="catchphrase" type="text" placeholder="Catch Phrase" required>
                </div>
                <div class="grupo">
                    <label>BS</label>
                    <input id="bs" type="text" placeholder="BS" required>
                </div>
                    <button class="boton" type="submit" id="Agregar">Agregar</button> 
            </form>
        </div>
    </section>

    <!-- Buscador de usuario -->
    <section id="Buscar_u" class="oculta">
        <div class="form-container">
            <form class="formulario">
                <div class="grupo">
                    <label>Username del usuario</label>
                    <input id="buscador" type="text" placeholder="Buscar Usuario" required>
                    <button class="boton" type="submit" id="Buscar">Buscar</button>
                </div>
            </form>
        </div>
    </section>
        
    <!-- Obtener post por id -->
    <section id="buscar_p" class="oculta">
        <div class="form-container">
            <form class="form">
                <div class="grupo">
                    <label>Id del Post</label>
                    <input id="obtain-post" placeholder="Id" required>
                    <button class="boton" type="submit" id="ObtainPost">Buscar Posts por Id</button>
                </div>
                <div id="resultado-post"></div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>

    </footer>
    <script>
        const interfaz = new Interface();        
        let menuVisible = $('#table_u');

        const menuMostrarUsuarios = $('#Mostrar-usuarios');
            menuMostrarUsuarios.click(()=>{
            interfaz.ocultarForm();
            interfaz.mostrarMenu(menuMostrarUsuarios);
            interfaz.mostrarSecciones(menuVisible,undefined, tabla = true);
            menuVisible = $('#table_u');
        });

        const menuAgregar = $('#Agregar-usuario');
            menuAgregar.click(()=>{
            interfaz.ocultarForm();
            interfaz.mostrarMenu(menuAgregar);
            interfaz.mostrarSecciones(menuVisible, agregar = true);
            menuVisible = $('#form_u');

            $('#form_u').find('input').each(function(){
                    $(this).attr("disabled",false);
                });
                $('#form_u').find('button').each(function(){
                    $(this).removeClass("oculta");
                    $(this).addClass('boton');
                    }
                );
                $('#name').val("");
                $('#username').val("");
                $('#email').val("");
                $('#street').val("");
                $('#suit').val("");
                $('#city').val("");
                $('#zipcode').val("");
                $('#lat').val("");
                $('lng').val("");
                $('#phone').val("");
                $('#website').val("");
                $('#company').val("");
                $('#catchphrase').val("");
                $('#bs').val("");
        });

        const menuBuscar = $('#Buscar-usuario');
            menuBuscar.click(()=>{
            interfaz.ocultarForm();
            interfaz.mostrarMenu(menuBuscar);
            interfaz.mostrarSecciones(menuVisible,undefined,undefined, buscar = true);
            menuVisible = $('#Buscar_u');
        });

        const menuMostrarPosts = $('#Mostrar-posts');
            menuMostrarPosts.click(()=>{
            interfaz.ocultarForm();
            interfaz.mostrarMenu(menuMostrarPosts);
            interfaz.mostrarSecciones(menuVisible,undefined,undefined,undefined,formulario = true);
            menuVisible = $('#form_p');
        });

        const menuObtener = $('#Obtener-posts');
            menuObtener.click(()=>{
            interfaz.ocultarForm();
            interfaz.mostrarMenu(menuObtener);
            interfaz.mostrarSecciones(menuVisible,undefined,undefined,undefined,undefined,mostrar = true);
            menuVisible = $('#buscar_p');
        }); 

        //Agregar usuario
        const btnAgregar = $("#Agregar");
        btnAgregar.click(()=>{
            if(!$("#name").val() ||
                !$("#username").val() ||
                !$("#email").val() ||
                !$("#street").val() ||
                !$("#suit").val() ||
                !$("#city").val() ||
                !$("#zipcode").val() ||
                !$("#lat").val() ||
                !$("#lng").val() ||
                !$("#phone").val() ||
                !$("#website").val() ||
                !$("#company").val() ||
                !$("#catchphrase").val() ||
                !$("#bs").val()){
                    return false
                } else{
                    interfaz.agregarUsuario();
                }
        });


        //Obtener publicaciones por ID
        const btnPublicacion = $("#ObtainPost");
        btnPublicacion.click(()=>{
        let postId = $("#obtain-post").val();
        interfaz.obtenerPublicacion(postId);
        });

        //Buscar user por username
        const btnUsuarios = $("#Buscar");
        btnUsuarios.click(()=>{
        let username = $("#buscador").val();
        interfaz.buscarUsuario(username);
        });

        const selectUserPosts = $('#select-usuarios'); 
        selectUserPosts.change(()=>{
            let usuarioId = selectUserPosts.val();
            interfaz.publicacionesPorUsuario(usuarioId);
        });
    </script>
</body>
</html>
